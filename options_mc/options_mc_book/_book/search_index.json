[["index.html", "Buying Derivatives - A Monte Carlo Approach 1 Introduction", " Buying Derivatives - A Monte Carlo Approach Jake Rozran 2023-04-15 1 Introduction Over the course of the last year, I have developed an algorithm that calculates the expected outcome for security1 derivatives2. In this paper, I am specifically referring to put options3 and call options4 on stocks when I reference security derivatives. To do this, I calculate several probabilities4 and find the expected gain or cost, then combine them to calculate the expected value5 and understand if it is worthwhile to purchase. These probabilities are bootstrapped6 through the use of a Monte Carlo simulation7. Finally, I am using this simulation across a variety of stocks to understand which options for which stock have the highest expected values. With the details from the Monte Carlo simulation, however, there are a number of different values created that can be used to create a winning strategy. "],["mc.html", "2 The Monte Carlo Engine 2.1 Effective Price and Being In-The-Money 2.2 Expected Stock Price if In-The-Money 2.3 Bringing it all Together: Expected Value of the Option", " 2 The Monte Carlo Engine I am attempting to predict what the price of any stock will be at an options expiration date, some days from now. The Monte Carlo simulation allows me to create probabilities for different scenarios. To say that more precisely, the simulation allows me to know the probability that an option will be in-the-money on its expiration date. As an example, I will predict what the price of Comcast (CMCSA) will be 30 days from now. The simulation is given all of the price change data from CMCSA back to 2000. It calculates the daily price changes. The simulation then randomly picks from the historical pot of price changes what the stock will do tomorrow and tomorrow and tomorrow (and so on, up to the end date 30 days from now). This gets you a single simulated possible path that the stock could take for the next 30 days. It is unlikely - probably there is actually 0% chance - that the stock will actually follow that exact random path. Here’s the magic of the simulation: I then create 10,000 to 100,000 more random paths using the exact same technique. This full world of simulated price paths allows me to see the distribution of potential prices at the option expiration date. I now know the average, median, high, low, etc. price at the expiration date. More beautifully, I can calculate probabilities that a stock price will reach or exceed a strike price at a given options expiration date (more on that below). 2.1 Effective Price and Being In-The-Money To find the probability that a certain option is in-the-money, we can simply count the number of simulations that finish above (or below for a put) the effective price (the strike plus the premium for the option) and divide by the total simulations - this is the beauty of the monte carlo simulations. 2.1.1 Why do we care about the effective price (instead of just Strike Price)? It is not enough to find out if an option will only go above its strike price. You have to pay to own the option… hence, you are already some money into the deal. Since you’ve already paid some money, you need to make that money back, too, to be in-the-money. When the strike is in-the-money, the premium to buy the option will be large enough to make the effective price equal to the current price. The more in-the-money, the higher the premium. When the strike is out-of-the-money, the premium will be smaller. The further out-of-the-money a strike is, the lower the premium. 2.1.2 Let’s look at an example. CMCSA is currently trading at $37.96. Let’s use a call option with a strike of $42 that has a premium of $0.05. The effective price of the option (for a call) is: $42 + $0.05 = $42.05. What is the probability that we meet or exceed that effective price on the strike date? To find that out, we count the number of all of the simulations that ended with a price greater than or equal to the effective price and divide that by the total count of simulations. In this case, we have 755 simulations that are in-the-money out of a total 10,000, or 7.55% chance that this option ends in the money. 2.2 Expected Stock Price if In-The-Money Now that I know the probability of it going above the effective price, I need to calculate the expected price of the stock if it is in-the-money. To do this, I simply take all simulations that end at or above the effective price and calculate the expected value (or mean). 2.3 Bringing it all Together: Expected Value of the Option I have the probability the option will end in-the-money (and by definition the probability that the option will end out-of-the-money). I also know the premium to buy the option and the expected price of the stock if it is above the effective price. I am ready to calculate the expected value of the option. It costs $5 to buy the option (100 shares at $0.05 each) There is a 7.55% chance the option ends in-the-money There is a 92.45% chance the option ends out-of-the-money If the option ends in the money, the stock is expected to be at $43.74, which is equivalent to a gain of $43.74 - $42.05, or $1.69 (times 100 shares) The gain if the option ends in the money is $169.07 The final gain, minus the $5 to buy the option in the first place, is $164.07 Putting all of that together, buying this option is worth $7.76 There is a 8% chance you make $164.07 There is also a 92% chance you just lose your $5 premium This expected value is really only possible if you execute this plan many many independent times over the long run "],["evaluating-the-portfolio.html", "3 Evaluating the Portfolio", " 3 Evaluating the Portfolio "],["def.html", "A Definitions", " A Definitions In finance, a security refers to a tradable financial asset that has monetary value and can be bought or sold in a financial market. Securities include a wide range of assets, such as stocks, bonds, options, futures, and exchange-traded funds (ETFs), among others.↩︎ A derivative is a financial instrument whose value is derived from the value of an underlying security, such as a stock, bond, commodity, or currency. In other words, the value of a derivative depends on the value of the underlying asset. There are many types of derivatives, including options, futures, forwards, and swaps.For example, an option is a type of derivative that gives the holder the right, but not the obligation, to buy or sell an underlying asset at a specific price within a specified time period.↩︎ A put option is a type of financial contract that gives the holder the right, but not the obligation, to sell an underlying security at a predetermined price (known as the strike price) within a specific period of time (known as the strike date).In other words, a put option gives the holder the ability to sell an asset at a certain price, even if the market price of the asset falls below the strike price. This can be useful for investors who believe that the price of an asset is likely to decline, as it allows them to profit from the decline without actually owning the asset.For example, if an investor buys a put option for a certain stock with a strike price of $50 and an expiration date of one month, and the stock’s market price falls to $40 during that time, the investor can exercise the put option to sell the stock at the higher strike price of $50, making a profit of $10 per share. However, if the stock’s market price remains above the strike price of $50, the investor may choose not to exercise the put option and will lose the premium paid to purchase the option.↩︎ A call option is a type of financial contract that gives the holder the right, but not the obligation, to buy an underlying asset, such as a stock, bond, or commodity, at a predetermined price (known as the strike price) within a specific period of time.In other words, a call option gives the holder the ability to purchase an asset at a certain price, even if the market price of the asset rises above the strike price. This can be useful for investors who believe that the price of an asset is likely to increase, as it allows them to profit from the increase without actually owning the asset.For example, if an investor buys a call option for a certain stock with a strike price of $50 and an expiration date of one month, and the stock’s market price rises to $60 during that time, the investor can exercise the call option to buy the stock at the lower strike price of $50, making a profit of $10 per share. However, if the stock’s market price remains below the strike price of $50, the investor may choose not to exercise the call option and will lose the premium paid to purchase the option.↩︎ Probability is a measure of the likelihood or chance that a specific event will occur, expressed as a number between 0 and 1.A probability of 0 means that the event is impossible, while a probability of 1 means that the event is certain to occur. A probability of 0.5 (or 50%) means that the event has an equal chance of occurring or not occurring.↩︎ Expected value is a concept used in statistics to calculate the long-term average value of a random variable, taking into account the probability of each possible outcome.The expected value is calculated by multiplying each possible outcome by its probability and adding up all the products. In other words, it is the weighted average of all possible outcomes.↩︎ A bootstrap sample is a sample of data that is created by randomly selecting observations with replacement from a larger data set. The term “bootstrap” comes from the idea of pulling oneself up by one’s bootstraps, as the bootstrap method allows us to estimate the properties of a population by repeatedly resampling from a smaller sample.To create a bootstrap sample, we start by randomly selecting an observation from the original data set and adding it to the new sample. We then put the observation back in the original data set and repeat this process, selecting a new observation with replacement each time, until we have a sample of the desired size. By selecting with replacement, some observations may be selected more than once, while others may not be selected at all.Bootstrap sampling is commonly used in statistics to estimate the sampling distribution of a statistic, such as the mean or variance, when the underlying population distribution is unknown or difficult to model. By repeatedly resampling from the available data, we can generate many different bootstrap samples and use them to estimate the variability and uncertainty of the statistic of interest.↩︎ A Monte Carlo simulation is a computational method used to estimate the probability distribution of an outcome by generating a large number of random samples or scenarios and analyzing their aggregate behavior.↩︎ "],["calculating-an-options-expected-value.html", "B Calculating an Option’s Expected Value", " B Calculating an Option’s Expected Value The expected value for each option can be calculated as follows: \\[\\begin{equation} E_p(k) = (P_{ae} * C) + (P_{be} * G) \\tag{B.1} \\end{equation}\\] \\[\\begin{equation} E_c(k) = (P_{be} * C) + (P_{ae} * G) \\tag{B.2} \\end{equation}\\] where \\(E_p(k)\\) is the expected value of a put at strike price \\(k\\) \\(E_c(k)\\) is the expected value of a call at strike price \\(k\\) \\(P_{ae}\\) is the probability a security price on the strike date is above the effective price1, \\(k_e\\) This is calculated with the Monte Carlo simulation \\(P_{ae} = \\frac{r_{ae}}{r_t}\\) where \\(r_{ae}\\) is the number of runs above the expected price and \\(r_t\\) are the total runs \\(P_{be}\\) = 1 - \\(P_{ae}\\) is the probability a security price on the strike date is below the effective price, \\(k_e\\) \\(C = 100c\\) is the cost to buy the option \\(c\\) is the cost of a single option (options are typically bought/sold in lots of 100) \\(G = 100(E_{p_s}(p_s|p_s&gt;k_e) - c)\\) is the expected gain if the derivative is in the money \\(E_{p_s}(p_s|p_s&gt;k_e)\\) is the expected value of the of the price of the stock, \\(p_s\\), given that the price of the stock has exceeded the effective price, \\(k_e\\) (for calls). The effective price is the strike price plus the option cost (for calls) - you cannot make money on the option until you cross this threshold↩︎ "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
